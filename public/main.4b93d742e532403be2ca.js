!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}([function(t,e,n){t.exports=n(7)},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var o,i=function(t){var e=t.slice();return e.sort(function(t,e){return e.apdex-t.apdex}),e=e.slice(0,25)},r=function(t){return'<div data-id="'+t.id+'"></div>'},s=function(){function t(t){this.mountPoint="",this.template=r,this.id=0,this.templateData={},this.setMount(t.selector),this.setTemplate(t.template),this.setID(),this.templateData.id=this.getID()}return t.prototype.init=function(t){void 0===t&&(t={}),this.render(this.templateData)},t.prototype.setTemplate=function(t){this.template=t},t.prototype.setMount=function(t){this.mountPoint=t},t.prototype.render=function(t){void 0===t&&(t={});var e=document.getElementById(this.mountPoint);if(!e)throw new Error("Component mount failed! Cannot find element #"+this.mountPoint+" to mount the app to.");e.insertAdjacentHTML("afterbegin",this.template(t))},t.prototype.setID=function(){this.id=Math.floor(1e4*Math.random())},t.prototype.getID=function(){return this.id},t.prototype.loadData=function(t){return function(t){return new Promise(function(e,n){var o=new XMLHttpRequest;o.open("GET",t),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("Cache-Control","no-cache"),o.onload=function(t){try{var i=JSON.parse(o.responseText);e({status:o.status,statusText:o.statusText,data:i})}catch(t){n("Error while parsing JSON")}},o.onerror=function(t){e({status:o.status,statusText:o.statusText,data:o.statusText})},o.send()})}(t)},t}(),a=(n(1),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){return'\n        <header class="header" id="Header_'+t.id+'">\n            <div class="header__container">\n                <h1 class="header__title">\n                    <span class="header__titlemain">'+t.title+'</span>\n                    <small class="header__subtitle">'+t.subtitle+'</small>\n                </h1>\n            </div>\n            <div class="header__controls">\n                <label>\n                    <input type="checkbox" name="view" value="grid" id="Checkbox_'+t.id+'" />\n                    <span>Show as list</span>\n                </label>\n            </div>\n        </header>\n    '},p=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.template=c,n.title="Header Title Goes Here",n.checkboxElem=null,n.onChange=n.onChange.bind(n),n}return a(e,t),e.prototype.init=function(t){void 0===t&&(t={}),this.templateData.title=t.title||this.title,this.templateData.subtitle=t.subtitle,this.render(this.templateData),this.checkboxElem=document.getElementById("Checkbox_"+this.id),this.initListeners()},e.prototype.initListeners=function(){this.checkboxElem&&this.checkboxElem.addEventListener("change",this.onChange)},e.prototype.onChange=function(t){t.preventDefault(),document.getElementsByClassName("board__cards")[0].classList.toggle("asList")},e}(s),u=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){return'\n        <div class="board" id="Board_'+t.id+'">\n            <div id="board__list" data-id="BoardList_'+t.id+'">\n            </div>\n        <//div>\n    '},d=function(t){function e(e){var n=t.call(this,e)||this;return n.template=l,n.cards=[],n}return u(e,t),e}(s),h=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=function(t){return'<li class="list-item" id="ListItem_'+t.id+'">'+t.item+"</li>"},m=function(t){function e(e){var n=t.call(this,e)||this;return n.template=f,n}return h(e,t),e.prototype.init=function(t){this.templateData.item=t.item,this.render(this.templateData)},e}(s),_=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),y=function(t){return'\n        <article class="card" id="Card_'+t.id+'">\n            <h2 class="card__title">'+t.title+'</h2>\n            <ul class="card__list" id="CardList_'+t.id+'"></ul>\n        </article>\n    '},v=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.template=y,n.title="Card Title Goes Here",n.childComponents=[],n.list=[],n.templateData.title=e.title,n}return _(e,t),e.prototype.init=function(t){void 0===t&&(t={}),this.list=t.list||[],this.templateData.title=t.title||this.title,this.render(this.templateData),this.initList(t.list,"CardList_"+this.id)},e.prototype.initList=function(t,e,n,o){void 0===n&&(n=m);var i=document.getElementById(e);i&&(i.innerHTML="");for(var r=0,s=0,a=t;s<a.length;s++){var c=a[s];if(null!==o&&r===o)break;var p=new n({selector:e});this.childComponents=Array().concat(this.childComponents,p),p.init({item:c.name,apdex:c.apdex,version:c.version}),r++}},e}(s),b=(n(2),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),C=function(t){return'     \n        <div class="listitem__index">'+t.apdex+'</div>\n        <div class="listitem__name">'+t.item+"</div>\n    "},H=function(t){function e(e){var n=t.call(this,e)||this;return n.template=C,n.element=null,n.version=0,n.item="",n.onClick=n.onClick.bind(n),n}return b(e,t),e.prototype.init=function(t){this.version=t.version,this.item=t.item,this.templateData.apdex=t.apdex,this.templateData.item=t.item,this.render(this.templateData),this.initListeners()},e.prototype.render=function(t){void 0===t&&(t={});var e=document.getElementById(this.mountPoint);if(!e)throw new Error("Component mount failed! Cannot find element #"+this.mountPoint+" to mount the app to.");this.element=document.createElement("li"),this.element.id="ApplicationItem_"+t.id,this.element.className="listitem--application",this.element.insertAdjacentHTML("afterbegin",this.template(t)),e.appendChild(this.element)},e.prototype.onClick=function(t){t.preventDefault(),alert(this.item+"\nRelease version: "+this.version)},e.prototype.initListeners=function(){this.element&&this.element.addEventListener("click",this.onClick)},e.prototype.removeListeners=function(){this.element&&this.element.removeEventListener("click",this.onClick)},e}(m),O=(n(3),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),w=function(t){return'\n        <article class="card card--host" id="HostCard_'+t.id+'">\n            <h2 class="card__title">'+t.title+'</h2>\n            <ul class="card__list" id="HostCardList_'+t.id+'">\n            </ul>\n        </article>\n    '},g=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.template=w,n}return O(e,t),e.prototype.init=function(t){void 0===t&&(t={}),this.list=t.list||[],this.templateData.title=t.title||this.title,this.render(this.templateData),this.initList(this.list,"HostCardList_"+this.id,H,5)},e.prototype.updateList=function(t){this.list=t,this.childComponents.forEach(function(t){t.removeListeners()}),this.initList(this.list,"HostCardList_"+this.id,H,5)},e}(v),P=(n(4),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),x=function(t){return'\n        <div class="board board--host" id="HostBoard_'+t.id+'">\n            <div class="board__cards" id="HostBoardCards_'+t.id+'"></div>\n        <//div>\n    '},j=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.template=x,n.jsonPath="/data/host-app-data.json",n.data=[],n.appsByHosts={},n.childComponents={},n}return P(e,t),e.prototype.init=function(){var t=this;this.loadData(this.jsonPath).then(function(e){return t.onSuccess(e)},function(e){return t.onError(e)}),this.exposeMethods()},e.prototype.onSuccess=function(t){var e=this;this.data=t.data,this.appsByHosts=function(t){for(var e={},n=0,o=t.length;n<o;n++){var i=t[n],r=t[n].host;if(r.length>0)for(var s=0,a=r.length;s<a;s++){var c=r[s];e.hasOwnProperty(c)?e[c].push(i):e[c]=[i]}}return e}(this.data),this.render(this.templateData),Object.keys(this.appsByHosts).forEach(function(t){var n=new g({selector:"HostBoardCards_"+e.id});e.childComponents["HostCard_"+t]=n,n.init({title:t,list:i(e.appsByHosts[t]).slice()})})},e.prototype.onError=function(t){console.error(t)},e.prototype.exposeMethods=function(){var t=this;window.getTopAppsByHost=function(e){return t.getTopAppsByHost(e)},window.removeAppFromHosts=function(e){return t.removeAppFromHosts(e)},window.addAppToHosts=function(e){return t.addAppToHosts(e)}},e.prototype.getTopAppsByHost=function(t){(void 0===t&&(t=""),t&&"string"==typeof t)?this.appsByHosts.hasOwnProperty(t)?i(this.appsByHosts[t]).forEach(function(t,e){console.log(e+1+". "+t.name+" ("+t.apdex+")\n")}):console.error('No host was found with name "'+t+'"!'):console.error("Can't retrieve top apps! Please provide a host name.")},e.prototype.removeAppFromHosts=function(t){var e=this;if(t&&"string"==typeof t){var n=[];Object.keys(this.appsByHosts).forEach(function(o){var i=e.appsByHosts[o].reduce(function(e,i,r){return i.name!==t&&e.push(i),i.name===t&&n.push(o),e},[]);e.appsByHosts[o]=i}),n.length?n.forEach(function(t){e.updateCardList(t,i(e.appsByHosts[t]))}):console.info('Could not find any app with the name "'+t+'".')}else console.error("Please provide the application's name you want to remove.")},e.prototype.addAppToHosts=function(t){var e=this;t&&"object"==typeof t?t.name&&t.apdex?t.host&&t.host.length?t.host.forEach(function(n){var o=e.appsByHosts[n];if(o)return e.appsByHosts[n]=o.concat([t]),void e.updateCardList(n,i(e.appsByHosts[n]));e.appsByHosts[n]=[t];var r=new g({selector:"HostBoardCards_"+e.id});e.childComponents["HostCard_"+n]=r,r.init({title:n,list:[t]})}):console.error("Application is missing host(s)."):console.error("Application is missing a name and/or apdex number."):console.error("Cannot add application to hosts.")},e.prototype.updateCardList=function(t,e){var n=this.childComponents["HostCard_"+t];n&&n.updateList(e.slice())},e}(d),A=(n(5),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),L=function(t){return'\n        <section class="app" id="App_'+t.id+'">\n            <div class="app__header" id="AppHeader_'+t.id+'"></div>\n            <main class="app__content" id="AppContent_'+t.id+'"></main>\n            <div class="app__footer" id="AppFooter_'+t.id+'"></div>\n        </section>\n    '},B=function(t){function e(e){var n=t.call(this,e)||this;return n.template=L,n.childComponents={},n.childComponents={Header:new p({selector:"AppHeader_"+n.id}),HostBoard:new j({selector:"AppContent_"+n.id})},n}return A(e,t),e.prototype.init=function(){var t=this;this.render(this.templateData),this.loadUserData().then(function(e){t.childComponents.Header.init({title:e.data.title,subtitle:"for user "+e.data.email})}),this.childComponents.HostBoard.init()},e.prototype.loadUserData=function(){return new Promise(function(t){t({status:200,statusText:"OK",data:{title:"Apps by Host",email:"averylongemailaddress@companyname.com"}})})},e}(s);n(6);new B({selector:"app"}).init()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9oZWxwZXJzL2hlbHBlcnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9jb21wb25lbnRzL0NvbXBvbmVudC9Db21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9oZWxwZXJzL3hoci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwL2NvbXBvbmVudHMvSGVhZGVyL0hlYWRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwL2NvbXBvbmVudHMvQm9hcmQvQm9hcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9jb21wb25lbnRzL0xpc3RJdGVtL0xpc3RJdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAvY29tcG9uZW50cy9DYXJkL0NhcmQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9jb21wb25lbnRzL0FwcGxpY2F0aW9uSXRlbS9BcHBsaWNhdGlvbkl0ZW0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC9jb21wb25lbnRzL0hvc3RDYXJkL0hvc3RDYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAvY29tcG9uZW50cy9Ib3N0Qm9hcmQvSG9zdEJvYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAvY29tcG9uZW50cy9BcHAvQXBwLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJmaWx0ZXJUb3BBcHBzIiwiYXBwcyIsImFwcHNPcmRlcmVkIiwic2xpY2UiLCJzb3J0IiwiYSIsImIiLCJhcGRleCIsInRlbXBsYXRlIiwiZGF0YSIsImlkIiwiQ29tcG9uZW50X0NvbXBvbmVudCIsIkNvbXBvbmVudCIsIm9wdGlvbnMiLCJ0aGlzIiwibW91bnRQb2ludCIsInRlbXBsYXRlRGF0YSIsInNldE1vdW50Iiwic2VsZWN0b3IiLCJzZXRUZW1wbGF0ZSIsInNldElEIiwiZ2V0SUQiLCJpbml0IiwicmVuZGVyIiwiYXBwRWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJFcnJvciIsImluc2VydEFkamFjZW50SFRNTCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImxvYWREYXRhIiwicGF0aCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ubG9hZCIsImV2ZW50IiwianNvbiIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJlIiwib25lcnJvciIsInNlbmQiLCJnZXRKU09OIiwiSGVhZGVyX3RlbXBsYXRlIiwidGl0bGUiLCJzdWJ0aXRsZSIsIkhlYWRlciIsIl9zdXBlciIsIl90aGlzIiwiY2hlY2tib3hFbGVtIiwib25DaGFuZ2UiLCJfX2V4dGVuZHMiLCJpbml0TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInByZXZlbnREZWZhdWx0IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIkJvYXJkX3RlbXBsYXRlIiwiQm9hcmQiLCJjYXJkcyIsIkJvYXJkX2V4dGVuZHMiLCJMaXN0SXRlbV90ZW1wbGF0ZSIsIml0ZW0iLCJMaXN0SXRlbSIsIkxpc3RJdGVtX2V4dGVuZHMiLCJDYXJkX3RlbXBsYXRlIiwiQ2FyZF9DYXJkIiwiQ2FyZCIsImNoaWxkQ29tcG9uZW50cyIsImxpc3QiLCJDYXJkX2V4dGVuZHMiLCJpbml0TGlzdCIsIkl0ZW0iLCJsaW1pdCIsImxpc3RDb250YWluZXIiLCJpbm5lckhUTUwiLCJjb3VudGVyIiwiX2kiLCJsaXN0XzEiLCJsZW5ndGgiLCJsaXN0SXRlbSIsIkFycmF5IiwiY29uY2F0IiwidmVyc2lvbiIsIkFwcGxpY2F0aW9uSXRlbV90ZW1wbGF0ZSIsIkFwcGxpY2F0aW9uSXRlbSIsImVsZW1lbnQiLCJvbkNsaWNrIiwiQXBwbGljYXRpb25JdGVtX2V4dGVuZHMiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJhbGVydCIsInJlbW92ZUxpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJIb3N0Q2FyZF90ZW1wbGF0ZSIsIkhvc3RDYXJkX0hvc3RDYXJkIiwiSG9zdENhcmQiLCJIb3N0Q2FyZF9leHRlbmRzIiwidXBkYXRlTGlzdCIsImZvckVhY2giLCJhcHBJdGVtIiwiSG9zdEJvYXJkX3RlbXBsYXRlIiwiSG9zdEJvYXJkX0hvc3RCb2FyZCIsIkhvc3RCb2FyZCIsImpzb25QYXRoIiwiYXBwc0J5SG9zdHMiLCJIb3N0Qm9hcmRfZXh0ZW5kcyIsInRoZW4iLCJyZXNwb25zZSIsIm9uU3VjY2VzcyIsIm9uRXJyb3IiLCJleHBvc2VNZXRob2RzIiwiYXBwbGljYXRpb24iLCJob3N0cyIsImhvc3QiLCJqIiwiayIsImhvc3ROYW1lIiwicHVzaCIsInByZXBhcmVIb3N0c0J5QXBwIiwia2V5cyIsImhvc3RDYXJkIiwiY29uc29sZSIsImVycm9yIiwid2luZG93IiwiZ2V0VG9wQXBwc0J5SG9zdCIsInJlbW92ZUFwcEZyb21Ib3N0cyIsImFwcE5hbWUiLCJhZGRBcHBUb0hvc3RzIiwiYXBwIiwibG9nIiwiZm91bmRJbkhvc3RzIiwiYXBwc0J5SG9zdCIsInJlZHVjZSIsImluZGV4IiwidXBkYXRlQ2FyZExpc3QiLCJpbmZvIiwiQXBwX3RlbXBsYXRlIiwiQXBwX0FwcCIsIkFwcCIsIkFwcF9leHRlbmRzIiwibG9hZFVzZXJEYXRhIiwiZW1haWwiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxVQUFXLENBQUVULFlBQVksRUFBTUssTUFB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eUI4SSxFQUFBRCxFQUFBOUYsR0FhckI4RixFQUFBM0osVUFBQTBCLEtBQUEsZUFBQW9DLEVBQUE1QyxLQUNJQSxLQUFLUyxPQUFPVCxLQUFLRSxjQUVqQkYsS0FBSzJJLGVBQWVsQyxLQUNoQixTQUFDQyxHQUVHOUQsRUFBS3FCLGdCQUFnQnZCLE9BQU9sQyxLQUFLLENBQzdCZ0MsTUFBT2tFLEVBQVMvRyxLQUFLNkMsTUFDckJDLFNBQVUsWUFBWWlFLEVBQVMvRyxLQUFLaUosVUFNaEQ1SSxLQUFLaUUsZ0JBQWdCb0MsVUFBVTdGLFFBTTNCaUksRUFBQTNKLFVBQUE2SixhQUFSLFdBQ0ksT0FBTyxJQUFJdkgsUUFBUSxTQUFDQyxHQUNoQkEsRUFBUSxDQUNKWSxPQUFRLElBQ1JDLFdBQVksS0FDWnZDLEtBQU0sQ0FDRjZDLE1BQU8sZUFDUG9HLE1BQU8sOENBSzNCSCxFQTdDQSxDQUF5QjVJLEcsS0NaYixJQUFJMkksRUFBSSxDQUFDcEksU0FBVSxRQUMzQkkiLCJmaWxlIjoibWFpbi40YjkzZDc0MmU1MzI0MDNiZTJjYS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgeyBBcHBsaWNhdGlvbiB9IGZyb20gJ0AvYXBwL3R5cGVzL0FwcGxpY2F0aW9uJztcblxuLyoqXG4gKiBHZW5lcmF0ZSByYW5kb20gbnVtYmVyIGFzIGFuIElEXG4gKi9cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZUlEID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwKTtcbn1cblxuLyoqXG4gKiBHcm91cHMgYWxsIGFwcGxpY2F0aW9ucyBpbnRvIHRoZWlyIGhvc3RzXG4gKiBAcGFyYW0gZGF0YSBMaXN0IG9mIGFwcGxpY2F0aW9uc1xuICovXG5leHBvcnQgY29uc3QgcHJlcGFyZUhvc3RzQnlBcHAgPSBmdW5jdGlvbiAoZGF0YTogQXBwbGljYXRpb25bXSkge1xuICAgIGNvbnN0IGFwcHNCeUhvc3RzOiB7W2tleTogc3RyaW5nXTogQXBwbGljYXRpb25bXX0gPSB7fTtcbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IGRhdGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGFwcGxpY2F0aW9uID0gZGF0YVtpXTtcbiAgICAgICAgY29uc3QgaG9zdHMgPSBkYXRhW2ldLmhvc3Q7XG4gICAgICAgIGlmIChob3N0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgayA9IGhvc3RzLmxlbmd0aDsgaiA8IGs7IGorKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhvc3ROYW1lID0gaG9zdHNbal07XG4gICAgICAgICAgICAgICAgaWYgKGFwcHNCeUhvc3RzLmhhc093blByb3BlcnR5KGhvc3ROYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBhcHBzQnlIb3N0c1tob3N0TmFtZV0ucHVzaChhcHBsaWNhdGlvbik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXBwc0J5SG9zdHNbaG9zdE5hbWVdID0gW2FwcGxpY2F0aW9uXTtcbiAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGFwcHNCeUhvc3RzO1xufVxuXG4vKipcbiAqIE9yZGVycyBhcHBsaWNhdGlvbnMgYnkgdGhlaXIgQXBkZXggaW5kZXgsIGRlc2NlbmRpbmdcbiAqIEBwYXJhbSBhcHBzIExpc3Qgb2YgYXBwbGljYXRpb25zXG4gKi9cbmV4cG9ydCBjb25zdCBmaWx0ZXJUb3BBcHBzID0gZnVuY3Rpb24gKGFwcHM6IEFwcGxpY2F0aW9uW10pIHtcbiAgICBsZXQgYXBwc09yZGVyZWQgPSBbLi4uYXBwc107XG4gICAgYXBwc09yZGVyZWQuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICByZXR1cm4gYi5hcGRleCAtIGEuYXBkZXg7XG4gICAgfSk7XG4gICAgYXBwc09yZGVyZWQgPSBhcHBzT3JkZXJlZC5zbGljZSgwLCAyNSk7XG4gICAgcmV0dXJuIGFwcHNPcmRlcmVkO1xufSIsImltcG9ydCB7IGdlbmVyYXRlSUQgfSBmcm9tICdAL2FwcC9oZWxwZXJzL2hlbHBlcnMnO1xuaW1wb3J0IHsgZ2V0SlNPTiB9IGZyb20gJ0AvYXBwL2hlbHBlcnMveGhyJ1xuXG5jb25zdCB0ZW1wbGF0ZSA9IGZ1bmN0aW9uIChkYXRhOiB7W2tleTogc3RyaW5nXTogYW55fSkge1xuICAgIHJldHVybiBgPGRpdiBkYXRhLWlkPVwiJHtkYXRhLmlkfVwiPjwvZGl2PmA7XG59O1xuXG4vKipcbiAqIENvbXBvbmVudCBDbGFzc1xuICogQmFzZSBjb21wb25lbnQgY2xhc3MgZm9yIGFsbCBjb21wb25lbnRzXG4gKi9cbmV4cG9ydCBjbGFzcyBDb21wb25lbnQge1xuICAgIHB1YmxpYyBtb3VudFBvaW50OiBzdHJpbmcgPSAnJztcbiAgICBwdWJsaWMgdGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICBwdWJsaWMgaWQ6IG51bWJlciA9IDA7XG4gICAgcHVibGljIHRlbXBsYXRlRGF0YToge1trZXk6IHN0cmluZ106IGFueX0gPSB7fTtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IHtba2V5OiBzdHJpbmddOiBhbnl9KSB7XG4gICAgICAgIHRoaXMuc2V0TW91bnQob3B0aW9ucy5zZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuc2V0VGVtcGxhdGUob3B0aW9ucy50ZW1wbGF0ZSk7XG4gICAgICAgIHRoaXMuc2V0SUQoKTtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZURhdGEuaWQgPSB0aGlzLmdldElEKCk7XG4gICAgfVxuXG4gICAgaW5pdChvcHRpb25zOiB7W2tleTogc3RyaW5nXTogYW55fSA9IHt9KSB7XG4gICAgICAgIHRoaXMucmVuZGVyKHRoaXMudGVtcGxhdGVEYXRhKTtcbiAgICB9XG5cbiAgICBzZXRUZW1wbGF0ZSh0ZW1wbGF0ZTogKCgpID0+IHN0cmluZykpOiB2b2lkIHtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgIH1cblxuICAgIHNldE1vdW50KHNlbGVjdG9yOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tb3VudFBvaW50ID0gc2VsZWN0b3I7XG4gICAgfVxuXG4gICAgcmVuZGVyKGRhdGE6IHtba2V5OiBzdHJpbmddOiBhbnl9ID0ge30pOiB2b2lkIHtcbiAgICAgICAgY29uc3QgYXBwRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMubW91bnRQb2ludCk7XG4gICAgICAgIGlmICghYXBwRWxlbWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb21wb25lbnQgbW91bnQgZmFpbGVkISBDYW5ub3QgZmluZCBlbGVtZW50ICMke3RoaXMubW91bnRQb2ludH0gdG8gbW91bnQgdGhlIGFwcCB0by5gKTtcbiAgICAgICAgfVxuICAgICAgICBhcHBFbGVtZW50Lmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIHRoaXMudGVtcGxhdGUoZGF0YSkpO1xuICAgIH1cblxuICAgIHNldElEKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmlkID0gZ2VuZXJhdGVJRCgpO1xuICAgIH1cblxuICAgIGdldElEKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkO1xuICAgIH1cblxuICAgIGxvYWREYXRhKHBhdGg6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIHJldHVybiBnZXRKU09OKHBhdGgpO1xuICAgIH1cbn0iLCIvKipcbiAqIFNpbXBsaWZpZWQgWEhSIHRvIHJlcXVlc3QgSlNPTlxuICogUmV0dXJucyBhIHByb21pc2VcbiAqIEBwYXJhbSBwYXRoIFBhdGggdG8gQVBJL0pTT05cbiAqL1xuZXhwb3J0IGNvbnN0IGdldEpTT04gPSAocGF0aDogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhoci5vcGVuKCdHRVQnLCBwYXRoKTtcbiAgICAgIFxuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnLCAnbm8tY2FjaGUnKTtcbiAgICBcbiAgICAgICAgeGhyLm9ubG9hZCA9IChldmVudDogUHJvZ3Jlc3NFdmVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB4aHIuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToganNvbixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgIHJlamVjdCgnRXJyb3Igd2hpbGUgcGFyc2luZyBKU09OJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgeGhyLm9uZXJyb3IgPSAoZXZlbnQ6IFByb2dyZXNzRXZlbnQpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICAgIHN0YXR1czogeGhyLnN0YXR1cyxcbiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dCxcbiAgICAgICAgICAgICAgICBkYXRhOiB4aHIuc3RhdHVzVGV4dCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIFxuICAgICAgICB4aHIuc2VuZCgpO1xuICAgIH0pO1xufSIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0AvYXBwL2NvbXBvbmVudHMvQ29tcG9uZW50L0NvbXBvbmVudCc7XG5pbXBvcnQgJy4vc3R5bGUuc2Nzcyc7XG5cbmNvbnN0IHRlbXBsYXRlID0gZnVuY3Rpb24gKGRhdGE6IHtba2V5OiBzdHJpbmddOiBhbnl9KSB7XG4gICAgcmV0dXJuIGBcbiAgICAgICAgPGhlYWRlciBjbGFzcz1cImhlYWRlclwiIGlkPVwiSGVhZGVyXyR7ZGF0YS5pZH1cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJfX2NvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIDxoMSBjbGFzcz1cImhlYWRlcl9fdGl0bGVcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJoZWFkZXJfX3RpdGxlbWFpblwiPiR7ZGF0YS50aXRsZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzbWFsbCBjbGFzcz1cImhlYWRlcl9fc3VidGl0bGVcIj4ke2RhdGEuc3VidGl0bGV9PC9zbWFsbD5cbiAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyX19jb250cm9sc1wiPlxuICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJ2aWV3XCIgdmFsdWU9XCJncmlkXCIgaWQ9XCJDaGVja2JveF8ke2RhdGEuaWR9XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+U2hvdyBhcyBsaXN0PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9oZWFkZXI+XG4gICAgYDtcbn07XG5cbi8qKlxuICogSGVhZGVyIENsYXNzXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAqL1xuZXhwb3J0IGNsYXNzIEhlYWRlciBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgcHVibGljIHRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgcHJpdmF0ZSB0aXRsZTogc3RyaW5nID0gJ0hlYWRlciBUaXRsZSBHb2VzIEhlcmUnO1xuICAgIHByaXZhdGUgY2hlY2tib3hFbGVtOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IHtba2V5OiBzdHJpbmddOiBhbnl9ID0ge30pIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgaW5pdChvcHRpb25zOiB7W2tleTogc3RyaW5nXTogYW55fSA9IHt9KTogdm9pZCB7XG4gICAgICAgIHRoaXMudGVtcGxhdGVEYXRhLnRpdGxlID0gb3B0aW9ucy50aXRsZSB8fCB0aGlzLnRpdGxlO1xuICAgICAgICB0aGlzLnRlbXBsYXRlRGF0YS5zdWJ0aXRsZSA9IG9wdGlvbnMuc3VidGl0bGU7XG4gICAgICAgIHRoaXMucmVuZGVyKHRoaXMudGVtcGxhdGVEYXRhKTtcbiAgICAgICAgdGhpcy5jaGVja2JveEVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgQ2hlY2tib3hfJHt0aGlzLmlkfWApO1xuICAgICAgICB0aGlzLmluaXRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgZXZlbnQgbGlzdGVuZXJzIFxuICAgICAqL1xuICAgIGluaXRMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmNoZWNrYm94RWxlbSkge1xuICAgICAgICAgICAgdGhpcy5jaGVja2JveEVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5vbkNoYW5nZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUb2dnbGUgZ3JpZC9saXN0IHZpZXdcbiAgICAgKiBAcGFyYW0gZSBDaGFuZ2UgZXZlbnRcbiAgICAgKi9cbiAgICBvbkNoYW5nZShlOiBFdmVudCk6IHZvaWQge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIC8vIElkZWFsbHkgc2hvdWxkIGJlIGF2b2lkZWQgdG8gbW9kaWZ5IGFub3RoZXIgY29tcG9uZW50cyBwcm9wZXJ0aWVzXG4gICAgICAgIC8vIEJldHRlciB3YXkgd291bGQgYmUgYSBzaW1wbGUgZXZlbnQgYnVzIGltcGxlbWVudGF0aW9uIGhlcmUgZW1pdHRpbmdcbiAgICAgICAgLy8gYW4gZXZlbnQsIGFuZCBvdGhlciBjb21wb25lbnQgd291bGQgbGlzdGVuIGFuZCBtb2RpZnkgaXRzIG93bnMgcHJvcHNcbiAgICAgICAgY29uc3QgYm9hcmRFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYm9hcmRfX2NhcmRzJyk7XG4gICAgICAgIGJvYXJkRWxlbVswXS5jbGFzc0xpc3QudG9nZ2xlKCdhc0xpc3QnKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQC9hcHAvY29tcG9uZW50cy9Db21wb25lbnQvQ29tcG9uZW50JztcblxuY29uc3QgdGVtcGxhdGUgPSBmdW5jdGlvbihkYXRhOiB7W2tleTogc3RyaW5nXTogYW55fSkge1xuICAgIHJldHVybiBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJib2FyZFwiIGlkPVwiQm9hcmRfJHtkYXRhLmlkfVwiPlxuICAgICAgICAgICAgPGRpdiBpZD1cImJvYXJkX19saXN0XCIgZGF0YS1pZD1cIkJvYXJkTGlzdF8ke2RhdGEuaWR9XCI+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC8vZGl2PlxuICAgIGA7XG59O1xuXG4vKipcbiAqIEJvYXJkIENsYXNzXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAqL1xuZXhwb3J0IGNsYXNzIEJvYXJkIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBwdWJsaWMgdGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICBwdWJsaWMgY2FyZHM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczoge1trZXk6IHN0cmluZ106IGFueX0pIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgfVxufSIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCJAL2FwcC9jb21wb25lbnRzL0NvbXBvbmVudC9Db21wb25lbnRcIjtcblxuY29uc3QgdGVtcGxhdGUgPSBmdW5jdGlvbihkYXRhOiB7W2tleTogc3RyaW5nXTogYW55fSkge1xuICAgIHJldHVybiBgPGxpIGNsYXNzPVwibGlzdC1pdGVtXCIgaWQ9XCJMaXN0SXRlbV8ke2RhdGEuaWR9XCI+JHtkYXRhLml0ZW19PC9saT5gO1xufVxuXG4vKipcbiAqIExpc3RJdGVtIENsYXNzXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAqL1xuZXhwb3J0IGNsYXNzIExpc3RJdGVtIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBwdWJsaWMgdGVtcGxhdGUgPSB0ZW1wbGF0ZTtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IHtba2V5OiBzdHJpbmddOiBhbnl9KSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGluaXQob3B0aW9uczoge1trZXk6IHN0cmluZ106IGFueX0pIHtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZURhdGEuaXRlbSA9IG9wdGlvbnMuaXRlbTtcblxuICAgICAgICB0aGlzLnJlbmRlcih0aGlzLnRlbXBsYXRlRGF0YSk7XG4gICAgfVxufSIsImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0AvYXBwL2NvbXBvbmVudHMvQ29tcG9uZW50L0NvbXBvbmVudCc7XG5pbXBvcnQgeyBMaXN0SXRlbSB9IGZyb20gJ0AvYXBwL2NvbXBvbmVudHMvTGlzdEl0ZW0vTGlzdEl0ZW0nO1xuXG5jb25zdCB0ZW1wbGF0ZSA9IGZ1bmN0aW9uIChkYXRhOiB7W2tleTogc3RyaW5nXTogYW55fSkge1xuICAgIHJldHVybiBgXG4gICAgICAgIDxhcnRpY2xlIGNsYXNzPVwiY2FyZFwiIGlkPVwiQ2FyZF8ke2RhdGEuaWR9XCI+XG4gICAgICAgICAgICA8aDIgY2xhc3M9XCJjYXJkX190aXRsZVwiPiR7ZGF0YS50aXRsZX08L2gyPlxuICAgICAgICAgICAgPHVsIGNsYXNzPVwiY2FyZF9fbGlzdFwiIGlkPVwiQ2FyZExpc3RfJHtkYXRhLmlkfVwiPjwvdWw+XG4gICAgICAgIDwvYXJ0aWNsZT5cbiAgICBgO1xufTtcblxuZXhwb3J0IGNsYXNzIENhcmQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHB1YmxpYyB0ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgIHB1YmxpYyB0aXRsZTogc3RyaW5nID0gJ0NhcmQgVGl0bGUgR29lcyBIZXJlJztcbiAgICBwdWJsaWMgY2hpbGRDb21wb25lbnRzOiBhbnlbXSA9IFtdO1xuICAgIHB1YmxpYyBsaXN0OiBhbnlbXSA9IFtdO1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczoge1trZXk6IHN0cmluZ106IGFueX0gPSB7fSkge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZURhdGEudGl0bGUgPSBvcHRpb25zLnRpdGxlO1xuICAgIH1cblxuICAgIGluaXQob3B0aW9uczoge1trZXk6IHN0cmluZ106IGFueX0gPSB7fSkge1xuICAgICAgICB0aGlzLmxpc3QgPSBvcHRpb25zLmxpc3QgfHwgW107XG4gICAgICAgIHRoaXMudGVtcGxhdGVEYXRhLnRpdGxlID0gb3B0aW9ucy50aXRsZSB8fCB0aGlzLnRpdGxlO1xuXG4gICAgICAgIHRoaXMucmVuZGVyKHRoaXMudGVtcGxhdGVEYXRhKTtcbiAgICAgICAgdGhpcy5pbml0TGlzdChvcHRpb25zLmxpc3QsIGBDYXJkTGlzdF8ke3RoaXMuaWR9YCk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIE91ciBjYXJkIGV4cGVjdHMgYSBjdXN0b21pc2FibGUgbGlzdCB0byBkaXNwbGF5LiBMaXN0IGl0ZW1zIGJlY29tZSB0aGUgY2hpbGQgY29tcG9uZW50c1xuICAgICAqIEBwYXJhbSBsaXN0IExpc3Qgb2Ygb2JqZWN0cyB0byBjcmVhdGUgZnJvbVxuICAgICAqIEBwYXJhbSBzZWxlY3RvciBDdXN0b20gdGVtcGxhdGUgRE9NIHNlbGVjdG9yXG4gICAgICogQHBhcmFtIEl0ZW0gQ3VzdG9tIHRlbXBsYXRlIFxuICAgICAqIEBwYXJhbSBsaW1pdCBMaW1pdCB0aGUgbGlzdCBvZiBpdGVtcyB0byBkaXNwbGF5XG4gICAgICovXG4gICAgaW5pdExpc3QobGlzdDogYW55W10sIHNlbGVjdG9yOiBzdHJpbmcsIEl0ZW06IGFueSA9IExpc3RJdGVtLCBsaW1pdD86IG51bWJlciB8IG51bGwpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgbGlzdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGVjdG9yKTtcbiAgICAgICAgaWYgKGxpc3RDb250YWluZXIpIGxpc3RDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGxldCBjb3VudGVyID0gMDtcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBsaXN0KSB7XG4gICAgICAgICAgICBpZiAobGltaXQgIT09IG51bGwgJiYgY291bnRlciA9PT0gbGltaXQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxpc3RJdGVtID0gbmV3IEl0ZW0oe3NlbGVjdG9yOiBzZWxlY3Rvcn0pO1xuICAgICAgICAgICAgdGhpcy5jaGlsZENvbXBvbmVudHMgPSBBcnJheSgpLmNvbmNhdCh0aGlzLmNoaWxkQ29tcG9uZW50cywgbGlzdEl0ZW0pO1xuICAgICAgICAgICAgbGlzdEl0ZW0uaW5pdCh7aXRlbTogaXRlbS5uYW1lLCBhcGRleDogaXRlbS5hcGRleCwgdmVyc2lvbjogaXRlbS52ZXJzaW9ufSk7XG4gICAgICAgICAgICBjb3VudGVyKys7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCJpbXBvcnQgeyBMaXN0SXRlbSB9IGZyb20gXCJAL2FwcC9jb21wb25lbnRzLy9MaXN0SXRlbS9MaXN0SXRlbVwiO1xuaW1wb3J0ICcuL3N0eWxlLnNjc3MnO1xuaW1wb3J0IHsgdGhyb3dzIH0gZnJvbSBcImFzc2VydFwiO1xuXG5jb25zdCB0ZW1wbGF0ZSA9IGZ1bmN0aW9uKGRhdGE6IHtba2V5OiBzdHJpbmddOiBhbnl9KSB7XG4gICAgcmV0dXJuIGAgICAgIFxuICAgICAgICA8ZGl2IGNsYXNzPVwibGlzdGl0ZW1fX2luZGV4XCI+JHtkYXRhLmFwZGV4fTwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibGlzdGl0ZW1fX25hbWVcIj4ke2RhdGEuaXRlbX08L2Rpdj5cbiAgICBgO1xufVxuXG4vKipcbiAqIEFwcGxpY2F0aW9uSXRlbVxuICogQGV4dGVuZHMgTGlzdEl0ZW1cbiAqIEBleHRlbmRzIENvbXBvbmVudFxuICovXG5leHBvcnQgY2xhc3MgQXBwbGljYXRpb25JdGVtIGV4dGVuZHMgTGlzdEl0ZW0ge1xuICAgIHB1YmxpYyB0ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgIHByaXZhdGUgZWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIHZlcnNpb246IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBpdGVtOiBzdHJpbmcgPSAnJztcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IHtba2V5OiBzdHJpbmddOiBhbnl9KSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9uQ2xpY2sgPSB0aGlzLm9uQ2xpY2suYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbml0KG9wdGlvbnM6IHtba2V5OiBzdHJpbmddOiBhbnl9KSB7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IG9wdGlvbnMudmVyc2lvbjtcbiAgICAgICAgdGhpcy5pdGVtID0gb3B0aW9ucy5pdGVtO1xuICAgICAgICB0aGlzLnRlbXBsYXRlRGF0YS5hcGRleCA9IG9wdGlvbnMuYXBkZXg7XG4gICAgICAgIHRoaXMudGVtcGxhdGVEYXRhLml0ZW0gPSBvcHRpb25zLml0ZW07XG4gICAgICAgIFxuICAgICAgICB0aGlzLnJlbmRlcih0aGlzLnRlbXBsYXRlRGF0YSk7XG4gICAgICAgIHRoaXMuaW5pdExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJ3cml0ZSByZW5kZXIgZnVuY3Rpb24gZnJvbSBDb21wb25lbnRcbiAgICAgKiBBbiBITVRMIEVsZW1lbnQgbmVlZHMgdG8gYmUgY3JlYXRlIHRvIGJlIGFibGUgdG8gYXR0YWNoIGV2ZW50IGxpc3RlbmVyc1xuICAgICAqIEBwYXJhbSBkYXRhIFxuICAgICAqL1xuICAgIHJlbmRlcihkYXRhOiB7W2tleTogc3RyaW5nXTogYW55fSA9IHt9KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGFwcEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLm1vdW50UG9pbnQpO1xuICAgICAgICBpZiAoIWFwcEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50IG1vdW50IGZhaWxlZCEgQ2Fubm90IGZpbmQgZWxlbWVudCAjJHt0aGlzLm1vdW50UG9pbnR9IHRvIG1vdW50IHRoZSBhcHAgdG8uYCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuaWQgPSBgQXBwbGljYXRpb25JdGVtXyR7ZGF0YS5pZH1gO1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gJ2xpc3RpdGVtLS1hcHBsaWNhdGlvbic7XG4gICAgICAgIHRoaXMuZWxlbWVudC5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCB0aGlzLnRlbXBsYXRlKGRhdGEpKTtcbiAgICAgICAgYXBwRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpOztcbiAgICB9XG5cbiAgICBvbkNsaWNrKGU6IEV2ZW50KSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgYWxlcnQoYCR7dGhpcy5pdGVtfVxcblJlbGVhc2UgdmVyc2lvbjogJHt0aGlzLnZlcnNpb259YCk7XG4gICAgfVxuXG4gICAgaW5pdExpc3RlbmVycygpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbW92ZUxpc3RlbmVycygpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgeyBBcHBsaWNhdGlvbiB9IGZyb20gJ0AvYXBwL3R5cGVzL0FwcGxpY2F0aW9uJztcbmltcG9ydCB7IENhcmQgfSBmcm9tICdAL2FwcC9jb21wb25lbnRzL0NhcmQvQ2FyZCc7XG5pbXBvcnQgeyBBcHBsaWNhdGlvbkl0ZW0gfSBmcm9tICdAL2FwcC9jb21wb25lbnRzL0FwcGxpY2F0aW9uSXRlbS9BcHBsaWNhdGlvbkl0ZW0nO1xuaW1wb3J0ICcuL3N0eWxlLnNjc3MnO1xuXG5jb25zdCB0ZW1wbGF0ZSA9IGZ1bmN0aW9uIChkYXRhOiB7W2tleTogc3RyaW5nXTogYW55fSkge1xuICAgIHJldHVybiBgXG4gICAgICAgIDxhcnRpY2xlIGNsYXNzPVwiY2FyZCBjYXJkLS1ob3N0XCIgaWQ9XCJIb3N0Q2FyZF8ke2RhdGEuaWR9XCI+XG4gICAgICAgICAgICA8aDIgY2xhc3M9XCJjYXJkX190aXRsZVwiPiR7ZGF0YS50aXRsZX08L2gyPlxuICAgICAgICAgICAgPHVsIGNsYXNzPVwiY2FyZF9fbGlzdFwiIGlkPVwiSG9zdENhcmRMaXN0XyR7ZGF0YS5pZH1cIj5cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgIDwvYXJ0aWNsZT5cbiAgICBgO1xufTtcblxuZXhwb3J0IGNsYXNzIEhvc3RDYXJkIGV4dGVuZHMgQ2FyZCB7XG4gICAgcHVibGljIHRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczoge1trZXk6IHN0cmluZ106IGFueX0gPSB7fSkge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICB9XG5cbiAgICBpbml0KG9wdGlvbnM6IHtba2V5OiBzdHJpbmddOiBhbnl9ID0ge30pIHtcbiAgICAgICAgdGhpcy5saXN0ID0gb3B0aW9ucy5saXN0IHx8IFtdO1xuICAgICAgICB0aGlzLnRlbXBsYXRlRGF0YS50aXRsZSA9IG9wdGlvbnMudGl0bGUgfHwgdGhpcy50aXRsZTtcblxuICAgICAgICB0aGlzLnJlbmRlcih0aGlzLnRlbXBsYXRlRGF0YSk7XG4gICAgICAgIHRoaXMuaW5pdExpc3QodGhpcy5saXN0LCBgSG9zdENhcmRMaXN0XyR7dGhpcy5pZH1gLCBBcHBsaWNhdGlvbkl0ZW0sIDUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGxpc3Qgd2l0aCBuZXcgZGF0YSByZWNlaXZlZFxuICAgICAqIFJlbW92ZXMgZXZlbnQgbGlzdGVuZXJzIGJlZm9yZSByZW1vdmluZyBET01cbiAgICAgKiBAcGFyYW0gbGlzdCBOZXcgbGlzdCBvZiBhcHBsaWNhdGlvbnNcbiAgICAgKi9cbiAgICB1cGRhdGVMaXN0KGxpc3Q6IEFwcGxpY2F0aW9uW10pIHtcbiAgICAgICAgdGhpcy5saXN0ID0gbGlzdDtcbiAgICAgICAgdGhpcy5jaGlsZENvbXBvbmVudHMuZm9yRWFjaCgoYXBwSXRlbSkgPT4ge1xuICAgICAgICAgICAgYXBwSXRlbS5yZW1vdmVMaXN0ZW5lcnMoKTtcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5pbml0TGlzdCh0aGlzLmxpc3QsIGBIb3N0Q2FyZExpc3RfJHt0aGlzLmlkfWAsIEFwcGxpY2F0aW9uSXRlbSwgNSk7XG4gICAgfVxufSIsImltcG9ydCB7IEFwcGxpY2F0aW9uIH0gZnJvbSAnQC9hcHAvdHlwZXMvQXBwbGljYXRpb24nO1xuaW1wb3J0IHsgQm9hcmQgfSBmcm9tICdAL2FwcC9jb21wb25lbnRzL0JvYXJkL0JvYXJkJztcbmltcG9ydCB7IEhvc3RDYXJkIH0gZnJvbSAnQC9hcHAvY29tcG9uZW50cy9Ib3N0Q2FyZC9Ib3N0Q2FyZCc7XG5pbXBvcnQgeyBwcmVwYXJlSG9zdHNCeUFwcCwgZmlsdGVyVG9wQXBwcyB9IGZyb20gJ0AvYXBwL2hlbHBlcnMvaGVscGVycyc7XG5pbXBvcnQgJy4vc3R5bGUuc2Nzcyc7XG5cbmNvbnN0IHRlbXBsYXRlID0gZnVuY3Rpb24oZGF0YToge1trZXk6IHN0cmluZ106IGFueX0pIHtcbiAgICByZXR1cm4gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiYm9hcmQgYm9hcmQtLWhvc3RcIiBpZD1cIkhvc3RCb2FyZF8ke2RhdGEuaWR9XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYm9hcmRfX2NhcmRzXCIgaWQ9XCJIb3N0Qm9hcmRDYXJkc18ke2RhdGEuaWR9XCI+PC9kaXY+XG4gICAgICAgIDwvL2Rpdj5cbiAgICBgO1xufTtcblxuLyoqXG4gKiBIb3N0Qm9hcmRcbiAqIEBleHRlbmRzIEJvYXJkXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAqL1xuZXhwb3J0IGNsYXNzIEhvc3RCb2FyZCBleHRlbmRzIEJvYXJkIHtcbiAgICBwdWJsaWMgdGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICBwcml2YXRlIGpzb25QYXRoOiBzdHJpbmcgPSAnL2RhdGEvaG9zdC1hcHAtZGF0YS5qc29uJztcbiAgICBwcml2YXRlIGRhdGE6IEFwcGxpY2F0aW9uW10gPSBbXTtcbiAgICBwcml2YXRlIGFwcHNCeUhvc3RzOiB7W2tleTogc3RyaW5nXTogQXBwbGljYXRpb25bXX0gPSB7fTtcbiAgICBwcml2YXRlIGNoaWxkQ29tcG9uZW50czoge1trZXk6IHN0cmluZ106IEhvc3RDYXJkfSA9IHt9O1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczoge1trZXk6IHN0cmluZ106IGFueX0gPSB7fSkge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICB9XG5cbiAgICBpbml0KCkge1xuICAgICAgICB0aGlzLmxvYWREYXRhKHRoaXMuanNvblBhdGgpLnRoZW4oXG4gICAgICAgICAgICAocmVzcG9uc2UpID0+IHRoaXMub25TdWNjZXNzKHJlc3BvbnNlKSxcbiAgICAgICAgICAgIChyZXNwb25zZSkgPT4gdGhpcy5vbkVycm9yKHJlc3BvbnNlKVxuICAgICAgICApO1xuICAgICAgICB0aGlzLmV4cG9zZU1ldGhvZHMoKTtcbiAgICB9XG5cbiAgICBvblN1Y2Nlc3MocmVzcG9uc2U6IHtba2V5OiBzdHJpbmddOiBhbnl9KTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGF0YSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIHRoaXMuYXBwc0J5SG9zdHMgPSBwcmVwYXJlSG9zdHNCeUFwcCh0aGlzLmRhdGEpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyKHRoaXMudGVtcGxhdGVEYXRhKTtcblxuICAgICAgICAvLyBHbyB0aHJvdWdoIGFsbCBob3N0cyBhbmQgY3JlYXRlIGEgQ2FyZCBmb3IgdGhlbVxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmFwcHNCeUhvc3RzKS5mb3JFYWNoKChob3N0TmFtZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaG9zdENhcmQgPSBuZXcgSG9zdENhcmQoe3NlbGVjdG9yOiBgSG9zdEJvYXJkQ2FyZHNfJHt0aGlzLmlkfWB9KTtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRDb21wb25lbnRzW2BIb3N0Q2FyZF8ke2hvc3ROYW1lfWBdID0gaG9zdENhcmQ7XG4gICAgICAgICAgICBob3N0Q2FyZC5pbml0KHt0aXRsZTogaG9zdE5hbWUsIGxpc3Q6IFsuLi5maWx0ZXJUb3BBcHBzKHRoaXMuYXBwc0J5SG9zdHNbaG9zdE5hbWVdKV19KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25FcnJvcihyZXNwb25zZToge1trZXk6IHN0cmluZ106IGFueX0pOiB2b2lkIHtcbiAgICAgICAgLy8gbm8tb3BcbiAgICAgICAgY29uc29sZS5lcnJvcihyZXNwb25zZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhwb3NlIG1ldGhvZHMgb24gd2luZG93LCBmb3IgdGVzdGluZyBvbmx5XG4gICAgICovXG4gICAgcHJpdmF0ZSBleHBvc2VNZXRob2RzKCkge1xuICAgICAgICAod2luZG93IGFzIGFueSkuZ2V0VG9wQXBwc0J5SG9zdCA9IChob3N0TmFtZTogc3RyaW5nKSA9PiB0aGlzLmdldFRvcEFwcHNCeUhvc3QoaG9zdE5hbWUpO1xuICAgICAgICAod2luZG93IGFzIGFueSkucmVtb3ZlQXBwRnJvbUhvc3RzID0gKGFwcE5hbWU6IHN0cmluZykgPT4gdGhpcy5yZW1vdmVBcHBGcm9tSG9zdHMoYXBwTmFtZSk7XG4gICAgICAgICh3aW5kb3cgYXMgYW55KS5hZGRBcHBUb0hvc3RzID0gKGFwcGxpY2F0aW9uOiBBcHBsaWNhdGlvbikgPT4gdGhpcy5hZGRBcHBUb0hvc3RzKGFwcGxpY2F0aW9uKVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VG9wQXBwc0J5SG9zdChob3N0TmFtZTogc3RyaW5nID0gJycpIHtcbiAgICAgICAgaWYgKCFob3N0TmFtZSB8fCB0eXBlb2YgaG9zdE5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBDYW4ndCByZXRyaWV2ZSB0b3AgYXBwcyEgUGxlYXNlIHByb3ZpZGUgYSBob3N0IG5hbWUuYCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuYXBwc0J5SG9zdHMuaGFzT3duUHJvcGVydHkoaG9zdE5hbWUpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBObyBob3N0IHdhcyBmb3VuZCB3aXRoIG5hbWUgXCIke2hvc3ROYW1lfVwiIWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdG9wQXBwc0J5SG9zdHMgPSBmaWx0ZXJUb3BBcHBzKHRoaXMuYXBwc0J5SG9zdHNbaG9zdE5hbWVdKTtcblxuICAgICAgICB0b3BBcHBzQnlIb3N0cy5mb3JFYWNoKChhcHA6IEFwcGxpY2F0aW9uLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgJHtpKzF9LiAke2FwcC5uYW1lfSAoJHthcHAuYXBkZXh9KVxcbmApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbW92ZUFwcEZyb21Ib3N0cyhhcHBOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKCFhcHBOYW1lIHx8IHR5cGVvZiBhcHBOYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgUGxlYXNlIHByb3ZpZGUgdGhlIGFwcGxpY2F0aW9uJ3MgbmFtZSB5b3Ugd2FudCB0byByZW1vdmUuYCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWNoZSBob3N0IGZpbmRpbmdzXG4gICAgICAgIGNvbnN0IGZvdW5kSW5Ib3N0czogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICAvLyBDcmVhdGUgbmV3IGFwcCBsaXN0IGZvciBlYWNoIGhvc3RcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5hcHBzQnlIb3N0cykuZm9yRWFjaCgoaG9zdE5hbWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFwcHNCeUhvc3QgPSB0aGlzLmFwcHNCeUhvc3RzW2hvc3ROYW1lXS5yZWR1Y2UoXG4gICAgICAgICAgICAgICAgKGFwcHM6IEFwcGxpY2F0aW9uW10sIGFwcDogQXBwbGljYXRpb24sIGluZGV4OiBudW1iZXIpOiBBcHBsaWNhdGlvbltdID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90IGFkZCBiYWNrIHNlbGVjdGVkIGFwcFxuICAgICAgICAgICAgICAgICAgICBpZiAoYXBwLm5hbWUgIT09IGFwcE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcHMucHVzaChhcHApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcHAubmFtZSA9PT0gYXBwTmFtZSkgZm91bmRJbkhvc3RzLnB1c2goaG9zdE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBwcztcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgW10gYXMgQXBwbGljYXRpb25bXSk7XG5cbiAgICAgICAgICAgIHRoaXMuYXBwc0J5SG9zdHNbaG9zdE5hbWVdID0gYXBwc0J5SG9zdDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGZvdW5kSW5Ib3N0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZvdW5kSW5Ib3N0cy5mb3JFYWNoKChob3N0TmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFJlcmVuZGVyIENhcmRzXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDYXJkTGlzdChob3N0TmFtZSwgZmlsdGVyVG9wQXBwcyh0aGlzLmFwcHNCeUhvc3RzW2hvc3ROYW1lXSkpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhgQ291bGQgbm90IGZpbmQgYW55IGFwcCB3aXRoIHRoZSBuYW1lIFwiJHthcHBOYW1lfVwiLmApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRBcHBUb0hvc3RzKGFwcDogQXBwbGljYXRpb24pOiB2b2lkIHtcbiAgICAgICAgaWYgKCFhcHAgfHwgdHlwZW9mIGFwcCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBhZGQgYXBwbGljYXRpb24gdG8gaG9zdHMuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWFwcC5uYW1lIHx8ICFhcHAuYXBkZXgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FwcGxpY2F0aW9uIGlzIG1pc3NpbmcgYSBuYW1lIGFuZC9vciBhcGRleCBudW1iZXIuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWFwcC5ob3N0IHx8ICFhcHAuaG9zdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FwcGxpY2F0aW9uIGlzIG1pc3NpbmcgaG9zdChzKS4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGhvc3ROYW1lcyA9IGFwcC5ob3N0O1xuICAgICAgICAvLyBPcHRpbWlzdGljYWxseSBhZGQgYXBwIHRvIGl0J3MgaG9zdHMuIFdlIGRvbid0IGNoZWNrIGlmIGl0IGV4aXN0cyBhbHJlYWR5XG4gICAgICAgIGhvc3ROYW1lcy5mb3JFYWNoKChob3N0TmFtZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGFwcHNCeUhvc3QgPSB0aGlzLmFwcHNCeUhvc3RzW2hvc3ROYW1lXTtcbiAgICAgICAgICAgIGlmIChhcHBzQnlIb3N0KSB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIGFwcFxuICAgICAgICAgICAgICAgIHRoaXMuYXBwc0J5SG9zdHNbaG9zdE5hbWVdID0gWy4uLmFwcHNCeUhvc3QsIGFwcF07XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHJlbmRlcmVkIGNhcmRzXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDYXJkTGlzdChob3N0TmFtZSwgZmlsdGVyVG9wQXBwcyh0aGlzLmFwcHNCeUhvc3RzW2hvc3ROYW1lXSkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGhvc3Qgd2l0aCBhcHAgaWYgZGlkIG5vdCBleGlzdCBiZWZvcmVcbiAgICAgICAgICAgICAgICB0aGlzLmFwcHNCeUhvc3RzW2hvc3ROYW1lXSA9IFthcHBdO1xuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBuZXcgY2FyZFxuICAgICAgICAgICAgICAgIGNvbnN0IGhvc3RDYXJkID0gbmV3IEhvc3RDYXJkKHtzZWxlY3RvcjogYEhvc3RCb2FyZENhcmRzXyR7dGhpcy5pZH1gfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGlsZENvbXBvbmVudHNbYEhvc3RDYXJkXyR7aG9zdE5hbWV9YF0gPSBob3N0Q2FyZDtcbiAgICAgICAgICAgICAgICBob3N0Q2FyZC5pbml0KHt0aXRsZTogaG9zdE5hbWUsIGxpc3Q6IFthcHBdfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBjaGlsZCBjb21wb25lbnQgd2l0aCBuZXcgbGlzdCBhbmQgcmVyZW5kZXJcbiAgICAgKiBAcGFyYW0gaG9zdE5hbWUgXG4gICAgICogQHBhcmFtIGxpc3QgXG4gICAgICovXG4gICAgcHJpdmF0ZSB1cGRhdGVDYXJkTGlzdChob3N0TmFtZTogc3RyaW5nLCBsaXN0OiBBcHBsaWNhdGlvbltdKSB7XG4gICAgICAgIGNvbnN0IGhvc3RDYXJkID0gdGhpcy5jaGlsZENvbXBvbmVudHNbYEhvc3RDYXJkXyR7aG9zdE5hbWV9YF07XG4gICAgICAgIGlmIChob3N0Q2FyZCkgaG9zdENhcmQudXBkYXRlTGlzdChbLi4ubGlzdF0pO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAL2FwcC9jb21wb25lbnRzL0NvbXBvbmVudC9Db21wb25lbnQnO1xuaW1wb3J0IHsgSGVhZGVyIH0gZnJvbSAnQC9hcHAvY29tcG9uZW50cy9IZWFkZXIvSGVhZGVyJ1xuaW1wb3J0IHsgSG9zdEJvYXJkIH0gZnJvbSAnQC9hcHAvY29tcG9uZW50cy9Ib3N0Qm9hcmQvSG9zdEJvYXJkJ1xuaW1wb3J0ICcuL3N0eWxlLnNjc3MnO1xuXG5jb25zdCB0ZW1wbGF0ZSA9IGZ1bmN0aW9uIChkYXRhOiB7W2tleTogc3RyaW5nXTogYW55fSkge1xuICAgIHJldHVybiBgXG4gICAgICAgIDxzZWN0aW9uIGNsYXNzPVwiYXBwXCIgaWQ9XCJBcHBfJHtkYXRhLmlkfVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFwcF9faGVhZGVyXCIgaWQ9XCJBcHBIZWFkZXJfJHtkYXRhLmlkfVwiPjwvZGl2PlxuICAgICAgICAgICAgPG1haW4gY2xhc3M9XCJhcHBfX2NvbnRlbnRcIiBpZD1cIkFwcENvbnRlbnRfJHtkYXRhLmlkfVwiPjwvbWFpbj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhcHBfX2Zvb3RlclwiIGlkPVwiQXBwRm9vdGVyXyR7ZGF0YS5pZH1cIj48L2Rpdj5cbiAgICAgICAgPC9zZWN0aW9uPlxuICAgIGA7XG59O1xuXG4vKipcbiAqIEFwcGxpY2F0aW9uIENsYXNzXG4gKiBAZXh0ZW5kcyBDb21wb25lbnRcbiAqL1xuZXhwb3J0IGNsYXNzIEFwcCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgcHVibGljIHRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgcHVibGljIGNoaWxkQ29tcG9uZW50czoge1trZXk6IHN0cmluZ106IENvbXBvbmVudH0gPSB7fTtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IHtba2V5OiBzdHJpbmddOiBhbnl9KSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICAvLyBDYWNoZSBjaGlsZCBjb21wb25lbnQgYXMgaW5zdGFuY2VzXG4gICAgICAgIHRoaXMuY2hpbGRDb21wb25lbnRzID0ge1xuICAgICAgICAgICAgSGVhZGVyOiBuZXcgSGVhZGVyKHtzZWxlY3RvcjogYEFwcEhlYWRlcl8ke3RoaXMuaWR9YH0pLFxuICAgICAgICAgICAgSG9zdEJvYXJkOiBuZXcgSG9zdEJvYXJkKHtzZWxlY3RvcjogYEFwcENvbnRlbnRfJHt0aGlzLmlkfWB9KSxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGluaXQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVuZGVyKHRoaXMudGVtcGxhdGVEYXRhKTtcblxuICAgICAgICB0aGlzLmxvYWRVc2VyRGF0YSgpLnRoZW4oXG4gICAgICAgICAgICAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBJbml0IEhlYWRlciBvbmx5IGFmdGVyIHVzZXIgZGF0YSBsb2FkcyBiZWNhdXNlIHdlIG5lZWQgZW1haWwgYWRkcmVzc1xuICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRDb21wb25lbnRzLkhlYWRlci5pbml0KHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHJlc3BvbnNlLmRhdGEudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiBgZm9yIHVzZXIgJHtyZXNwb25zZS5kYXRhLmVtYWlsfWAsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gSW5pdCB0aGUgQm9hcmQgc3luY2hyb25vdXNseSBcbiAgICAgICAgdGhpcy5jaGlsZENvbXBvbmVudHMuSG9zdEJvYXJkLmluaXQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb2NrIGxvYWRpbmcgdXNlciBkYXRhIGZyb20gQVBJXG4gICAgICovXG4gICAgcHJpdmF0ZSBsb2FkVXNlckRhdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiAnT0snLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdBcHBzIGJ5IEhvc3QnLFxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogJ2F2ZXJ5bG9uZ2VtYWlsYWRkcmVzc0Bjb21wYW55bmFtZS5jb20nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBBcHAgfSBmcm9tICdAL2FwcC9jb21wb25lbnRzL0FwcC9BcHAnO1xuaW1wb3J0ICdAL3N0eWxlcy9zdHlsZS5zY3NzJztcblxuLyoqXG4gKiBBcHBsaWNhdGlvbiBlbnRyeSBwb2ludFxuICogSW5pdGlsYWl6aW5nXG4gKi9cbmNvbnN0IGFwcCA9IG5ldyBBcHAoe3NlbGVjdG9yOiAnYXBwJ30pO1xuYXBwLmluaXQoKTsiXSwic291cmNlUm9vdCI6IiJ9